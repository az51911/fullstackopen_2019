(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),u=t.n(r),c=t(2),i=function(e){var n=e.input_string,t=e.change_function;return o.a.createElement("form",null,o.a.createElement("div",null,"filter shown with"," ",o.a.createElement("input",{value:n,onChange:t})))},l=function(e){return o.a.createElement("form",{onSubmit:e.onSubmit},o.a.createElement("div",null,"name:"," ",o.a.createElement("input",{value:e.input_name,onChange:e.input_name_onchange}),o.a.createElement("div",null,"number:"," ",o.a.createElement("input",{value:e.input_number,onChange:e.input_number_onchange}))),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.persons_info,t=e.search_string,a=e.DeletePersonButton,r=function(e){var n=e.id,t=e.name,r=e.number;return o.a.createElement("div",null,t," ",r,"  ",o.a.createElement("button",{onClick:function(){a(n)}}," delete "))},u=""===t?n:n.filter(function(e){return e.name.toUpperCase().includes(t.toUpperCase())});return o.a.createElement("div",null,u.map(function(e){return o.a.createElement(r,{key:e.id,id:e.id,name:e.name,number:e.number})}))},s=t(3),d=t.n(s),f="/api/persons",p=function(){return d.a.get(f).then(function(e){return console.log(e.data),e.data})},b=function(e){return d.a.post(f,e).then(function(e){return e.data})},g=function(e,n){return d.a.put("".concat(f,"/").concat(e),n).then(function(e){return e.data})},h=function(e){return d.a.delete("".concat(f,"/").concat(e)).then(function(e){return e.data})},v=function(e){var n=e.message,t=e.messageId;return null===n?null:o.a.createElement("div",{className:t},n)},E=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),s=Object(c.a)(u,2),d=s[0],f=s[1],E=Object(a.useState)(""),_=Object(c.a)(E,2),w=_[0],j=_[1],O=Object(a.useState)(""),S=Object(c.a)(O,2),C=S[0],k=S[1],y=Object(a.useState)(!1),I=Object(c.a)(y,2),T=I[0],P=I[1],B=Object(a.useState)(null),D=Object(c.a)(B,2),J=D[0],N=D[1],U=Object(a.useState)(null),x=Object(c.a)(U,2),q=x[0],z=x[1];Object(a.useEffect)(function(){console.log("use effect now"),console.log("PersonChange is: ",T),p().then(function(e){console.log(e),r(e)})},[T]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(v,{message:J,messageId:q}),o.a.createElement(i,{input_string:C,change_function:function(e){k(e.target.value)}}),o.a.createElement("h3",null,"add a new"),o.a.createElement(l,{onSubmit:function(e){e.preventDefault();var n=0,a={id:t.length+1,name:d,number:w};t.forEach(function(e){if(e.name===a.name){var o=e.name,u=window.confirm("".concat(o," is already added to the phonebook, replace the old number with a new one?"));a.id=e.id,n=1,u&&g(e.id,a).then(function(e){console.log("response is: ",e),P(!T),N("".concat(a.name,"'s number was updated")),setTimeout(function(){N(null)},3e3),z("update")}).catch(function(e){N("Information of ".concat(a.name," was already removed from server")),setTimeout(function(){N(null)},3e3),z("error"),r(t.filter(function(e){return e.id!==a.id})),console.log(t),P(!T)})}}),n||(console.log("adding person"),b(a).then(function(e){console.log("person added"),P(!T),r(t.concat(e)),N("".concat(a.name," added")),setTimeout(function(){N(null)},3e3),z("addition"),console.log(t)}).catch(function(e){N("Input validation error, did not add person \n"),setTimeout(function(){N(null)},3e3),z("error"),r(t.filter(function(e){return e.id!==a.id})),console.log(t),P(!T)}))},input_name:d,input_name_onchange:function(e){f(e.target.value)},input_number:w,input_number_onchange:function(e){j(e.target.value)}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(m,{persons_info:t,search_string:C,DeletePersonButton:function(e){var n=e,a=t.filter(function(e){return e.id===n})[0].name;console.log(n),console.log(a),window.confirm("delete ".concat(a,"?"))&&h(n).then(function(e){P(!T)}).catch(function(e){N("Information of ".concat(a," was already removed from server")),setTimeout(function(){N(null)},3e3),z("error"),P(!T)})}}))},_=(t(37),document.getElementById("root"));u.a.render(o.a.createElement(E,null),_)}},[[14,1,2]]]);
//# sourceMappingURL=main.8cdafe79.chunk.js.map